<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>java数组</title>
    <url>/posts/ac695e64.html</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>数组</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo -&gt;Next</title>
    <url>/posts/1b2993f2.html</url>
    <content><![CDATA[<p>基于hexo，Next主题，在GitHub平台下创建个人博客</p>
<a id="more"></a>

<h2 id="注册GitHub账号"><a href="#注册GitHub账号" class="headerlink" title="注册GitHub账号"></a>注册GitHub账号</h2><p>创建repository为 <code>账号名.github.io</code> <br><br>setting &gt; option &gt; GitHub Pages&gt;&gt;choose a theme</p>
<h2 id="本地创建hexo项目"><a href="#本地创建hexo项目" class="headerlink" title="本地创建hexo项目"></a>本地创建hexo项目</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">mkdir hexo</span><br><span class="line">hexo init hexo</span><br><span class="line"><span class="built_in">cd</span> hexo</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br><span class="line"></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br><span class="line"></span><br><span class="line">npm install hexo-abbrlink --save</span><br><span class="line">npm install hexo-generator-searchdb --save</span><br><span class="line">npm install hexo-symbols-count-time --save</span><br><span class="line">npm install hexo-helper-live2d --save</span><br><span class="line">npm install live2d-widget-model-hijiki  --save</span><br><span class="line">npm install live2d-widget-model-tororo  --save</span><br><span class="line">npm install live2d-widget-model-shizuku  --save</span><br><span class="line">npm install live2d-widget-model-z16  --save</span><br><span class="line"></span><br><span class="line">hexo new page categories</span><br><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>

<h2 id="配置git信息"><a href="#配置git信息" class="headerlink" title="配置git信息"></a>配置git信息</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">"账号名"</span></span><br><span class="line">git config --global user.name <span class="string">"注册的邮箱"</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">"注册的邮箱"</span></span><br></pre></td></tr></table></figure>

<h2 id="项目的-config-yml"><a href="#项目的-config-yml" class="headerlink" title="项目的_config.yml"></a>项目的_config.yml</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br><span class="line"><span class="comment">#https://hexo.io/docs/deployment.html</span></span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line"> <span class="built_in">type</span>: git</span><br><span class="line"> repo: https://github.com/账号名/账号名.github.io.git</span><br><span class="line"> branch: master</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>go基础</title>
    <url>/posts/53eb1664.html</url>
    <content><![CDATA[<h3 id="Go-语言最主要的特性："><a href="#Go-语言最主要的特性：" class="headerlink" title="Go 语言最主要的特性："></a>Go 语言最主要的特性：</h3><p>自动垃圾回收<br>更丰富的内置类型<br>函数多返回值<br>错误处理<br>匿名函数和闭包<br>类型和接口<br>并发编程<br>反射<br>语言交互性</p>
<p><a href="https://gobyexample.xgwang.me/" target="_blank" rel="noopener">Go by Example 中文版</a></p>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title>Elasticsearch-PHP laravel</title>
    <url>/posts/46360506.html</url>
    <content><![CDATA[<p>Elasticsearch 是一个分布式的搜索和分析引擎.Elasticsearch 基于 Lucene 开发，是 Lucene 的封装，提供了 REST API 的操作接口.</p>
<a id="more"></a>
<h1 id="基于php为后端语言展开学习"><a href="#基于php为后端语言展开学习" class="headerlink" title="基于php为后端语言展开学习"></a>基于php为后端语言展开学习</h1><h2 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h2><h3 id="核心软件"><a href="#核心软件" class="headerlink" title="核心软件"></a>核心软件</h3><p><a href="http://jdk.java.net/12/" target="_blank" rel="noopener">jdk8以上版本</a><br><a href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch" target="_blank" rel="noopener">elasticsearch</a> 7以上版本可选包含jdk版<br><a href="https://www.elastic.co/cn/downloads/past-releases#kibana" target="_blank" rel="noopener">kibana</a><br><a href="https://www.elastic.co/cn/downloads/past-releases#logstash" target="_blank" rel="noopener">logstash</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">logstash-plugin.bat install logstash-input-jdbc</span><br><span class="line">logstash.bat -f config&#x2F;jdbc.conf Logstash startup </span><br><span class="line">logstash.bat -f config&#x2F;jdbc.conf --config.reload.automatic</span><br></pre></td></tr></table></figure>
<p><a href="git://github.com/mobz/elasticsearch-head">elasticsearch-head</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git://github.com/mobz/elasticsearch-head.git</span><br><span class="line"><span class="built_in">cd</span> elasticsearch-head</span><br><span class="line">npm install</span><br><span class="line">npm run start</span><br><span class="line">open http://localhost:9100/</span><br><span class="line"></span><br><span class="line"><span class="comment">## 修改配置： 文件：Gruntfile.js</span></span><br><span class="line">connect: &#123;</span><br><span class="line">    server: &#123;</span><br><span class="line">        options: &#123;</span><br><span class="line">            port: 9100,</span><br><span class="line">            hostname: <span class="string">'*'</span>,</span><br><span class="line">            base: <span class="string">'.'</span>,</span><br><span class="line">            keepalive: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line"><span class="comment">## elasticsearch.yml跨域问题</span></span><br><span class="line">http.cors.enabled: <span class="literal">true</span></span><br><span class="line">http.cors.allow-origin: <span class="string">"*"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## kibana</span></span><br><span class="line">运行 kibana.bat</span><br><span class="line">访问 http://127.0.0.1:5601</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/medcl/elasticsearch-analysis-ik/" target="_blank" rel="noopener">elasticsearch-analysis-ik</a> elastic分词插件<br><a href="https://github.com/medcl/elasticsearch-analysis-pinyin" target="_blank" rel="noopener">elasticsearch-analysis-pinyin</a> elastic分词插件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">elasticsearch-plugin.bat install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.4.0/elasticsearch-analysis-ik-7.4.0.zip</span><br><span class="line">elasticsearch-plugin.bat install https://github.com/medcl/elasticsearch-analysis-pinyin/releases/download/v7.4.0/elasticsearch-analysis-pinyin-7.4.0.zip</span><br><span class="line"></span><br><span class="line">elasticsearch.bat -d -p pid</span><br><span class="line">访问 http://127.0.0.1:9200/</span><br></pre></td></tr></table></figure>
<h3 id="php框架选取"><a href="#php框架选取" class="headerlink" title="php框架选取"></a>php框架选取</h3><p>laravel6<br>必要组件<br><a href="https://packagist.org/packages/elasticsearch/elasticsearch" target="_blank" rel="noopener">Elasticsearch-PHP</a>与elastic版本对应</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">composer require elasticsearch/elasticsearch</span><br><span class="line">composer require laravel/scout</span><br></pre></td></tr></table></figure>
<h2 id="elasticsearch-php基础知识"><a href="#elasticsearch-php基础知识" class="headerlink" title="elasticsearch-php基础知识"></a>elasticsearch-php基础知识</h2><p>Elastic 只允许远程访问，修改安装目录的config/elasticsearch.yml文件，去掉network.host的注释，将它的值改成0.0.0.0，然后重新启动 Elastic。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">network.host: 0.0.0.0</span><br></pre></td></tr></table></figure>
<p>查看当前节点的所有 Index<br><a href="http://localhost:9200/_cat/indices?v" target="_blank" rel="noopener">http://localhost:9200/_cat/indices?v</a><br>命令可以列出每个 Index 所包含的 Type。<br><a href="http://localhost:9200/_mapping?pretty=true" target="_blank" rel="noopener">http://localhost:9200/_mapping?pretty=true</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="variable">$hosts</span> = [</span><br><span class="line">    <span class="string">'127.0.0.1:9200'</span>,         // IP + Port</span><br><span class="line">    <span class="string">'127.0.0.1'</span>,              // Just IP</span><br><span class="line">    <span class="string">'demo.com:92000'</span>, // Domain + Port</span><br><span class="line">    <span class="string">'mydomain2.server.com'</span>,     // Just Domain</span><br><span class="line">    <span class="string">'https://localhost'</span>,        // SSL to localhost</span><br><span class="line">    <span class="string">'https://192.168.1.3:9200'</span>  // SSL to IP + Port</span><br><span class="line">];</span><br><span class="line"><span class="variable">$client</span> = ClientBuilder::create()           // Instantiate a new ClientBuilder</span><br><span class="line">                    -&gt;setHosts(<span class="variable">$hosts</span>)      // Set the hosts</span><br><span class="line">                    -&gt;build();              // Build the client object</span><br></pre></td></tr></table></figure>

<p><a href="https://learnku.com/articles/22821" target="_blank" rel="noopener">lasticsearch 高亮查询</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="string">'highlight'</span> =&gt; [</span><br><span class="line">	<span class="string">'pre_tags'</span> =&gt; [<span class="string">"&lt;em&gt;"</span>],</span><br><span class="line">	<span class="string">'post_tags'</span> =&gt; [<span class="string">"&lt;/em&gt;"</span>],</span><br><span class="line">	<span class="string">'fields'</span> =&gt; [</span><br><span class="line">		<span class="string">"*"</span> =&gt; new \stdClass()</span><br><span class="line">	],</span><br><span class="line">	<span class="string">'require_field_match'</span> =&gt; <span class="literal">false</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><a href="https://packagist.org/" target="_blank" rel="noopener">packagist</a><br><a href="https://elasticsearch.cn/" target="_blank" rel="noopener">elasticsearch中文社区</a><br><a href="https://www.elastic.co/guide/cn/elasticsearch/php/current/index.html" target="_blank" rel="noopener">Elasticsearch-PHP</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">  <span class="variable">$hosts</span> = [</span><br><span class="line">        <span class="string">'127.0.0.1:9200'</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$client</span> = \Elasticsearch\ClientBuilder::create()-&gt;setHosts(<span class="variable">$hosts</span>)-&gt;build();</span><br><span class="line"></span><br><span class="line">    <span class="variable">$params</span> = [</span><br><span class="line">        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">        <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">        <span class="string">'body'</span> =&gt; [</span><br><span class="line">            <span class="string">'settings'</span> =&gt; [</span><br><span class="line">                <span class="string">'number_of_shards'</span> =&gt; 3,</span><br><span class="line">                <span class="string">'number_of_replicas'</span> =&gt; 2,</span><br><span class="line">            ],</span><br><span class="line"></span><br><span class="line">            <span class="string">'mappings'</span> =&gt; [</span><br><span class="line">                <span class="string">'my_type'</span> =&gt; [</span><br><span class="line">                    <span class="string">'_source'</span> =&gt; [</span><br><span class="line">                        <span class="string">'enabled'</span> =&gt; <span class="literal">true</span></span><br><span class="line">                    ],</span><br><span class="line">                    <span class="string">'properties'</span> =&gt; [</span><br><span class="line"></span><br><span class="line">                        <span class="string">'contents'</span> =&gt; [</span><br><span class="line">                            <span class="string">'type'</span> =&gt; <span class="string">'text'</span>, // 字符串型</span><br><span class="line">                            <span class="string">'analyzer'</span>=&gt;<span class="string">'ik_max_word'</span>, //ik_max_word 最细粒度拆分 ik_smart最粗粒度拆分</span><br><span class="line">//                            <span class="string">'analyzer'</span>=&gt;[</span><br><span class="line">//                                    <span class="string">'default'</span>=&gt; [</span><br><span class="line">//                                        <span class="string">'type'</span>=&gt; <span class="string">'keyword'</span></span><br><span class="line">//                                    ]</span><br><span class="line">//                            ],</span><br><span class="line">                            <span class="string">'search_analyzer'</span>=&gt; <span class="string">'ik_max_word'</span></span><br><span class="line">                        ]</span><br><span class="line">                    ]</span><br><span class="line">                ]</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">'testField'</span> =&gt; <span class="string">'ElasticSearch测试、IK分词简单测试(PHP) - 派煌篇的博..._CSDN博客'</span>,</span><br><span class="line"></span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">//my_type 是 my_index 索引的类型名</span><br><span class="line">//</span><br><span class="line">//properties 代表 该类型中的属性</span><br><span class="line">//</span><br><span class="line">//first_name 你可以理解为数据库中的表中的字段。<span class="built_in">type</span> 是类型。6.5 中没有 string 这个类型了，统一叫 text。 analyzer 标识分析器，这里我们采用 我们下载的 ik 中的 ik_max_word。</span><br><span class="line">//</span><br><span class="line">//IK分词支持两种分析器Analyzer: ik_smart , ik_max_word , 两种分词器Tokenizer: ik_smart , ik_max_word，</span><br><span class="line">//ik_max_word: 会将文本做最细粒度的拆分，比如会将“中华人民共和国国歌”拆分为“中华人民共和国,中华人民,中华,华人,人民共和国,人民,人,民,共和国,共和,和,国国,国歌”，会穷尽各种可能的组合；</span><br><span class="line">//ik_smart: 会做最粗粒度的拆分，比如会将“中华人民共和国国歌”拆分为“中华人民共和国,国歌”。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable">$response</span> = <span class="variable">$client</span>-&gt;index(<span class="variable">$params</span>);</span><br><span class="line">    dump(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line">//    <span class="variable">$params</span> = [</span><br><span class="line">//        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">//    <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">////        <span class="string">'id'</span> =&gt; <span class="string">'u0Jhs20B8L96YVnGKiGf'</span></span><br><span class="line">//    ];</span><br><span class="line"></span><br><span class="line">//    <span class="variable">$response</span> = <span class="variable">$client</span>-&gt;get(<span class="variable">$params</span>);</span><br><span class="line">//    dump(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$params</span> = [</span><br><span class="line">        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">        <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">        <span class="string">'body'</span> =&gt; [</span><br><span class="line">            <span class="string">'query'</span> =&gt; [</span><br><span class="line">                <span class="string">'match'</span> =&gt; [</span><br><span class="line">                    <span class="string">'testField'</span> =&gt; <span class="string">'elastic php ik'</span></span><br><span class="line">                ]</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">'highlight'</span> =&gt; [</span><br><span class="line">                <span class="string">'pre_tags'</span> =&gt; [<span class="string">"&lt;em&gt;"</span>],</span><br><span class="line">                <span class="string">'post_tags'</span> =&gt; [<span class="string">"&lt;/em&gt;"</span>],</span><br><span class="line">                <span class="string">'fields'</span> =&gt; [</span><br><span class="line">                    <span class="string">"*"</span> =&gt; new \stdClass()</span><br><span class="line">                ],</span><br><span class="line">                <span class="string">'require_field_match'</span> =&gt; <span class="literal">false</span></span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$response</span> = <span class="variable">$client</span>-&gt;search(<span class="variable">$params</span>);</span><br><span class="line">    dump(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable">$params</span> = [</span><br><span class="line">        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">        <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">        <span class="string">'body'</span> =&gt; [</span><br><span class="line">            <span class="string">'query'</span> =&gt; [</span><br><span class="line">                <span class="string">'match_phrase_prefix'</span> =&gt; [</span><br><span class="line">                    <span class="string">'testField'</span> =&gt; <span class="string">'elastic'</span></span><br><span class="line">                ],</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">'highlight'</span> =&gt; [</span><br><span class="line">                <span class="string">'pre_tags'</span> =&gt; [<span class="string">"&lt;em&gt;"</span>],</span><br><span class="line">                <span class="string">'post_tags'</span> =&gt; [<span class="string">"&lt;/em&gt;"</span>],</span><br><span class="line">                <span class="string">'fields'</span> =&gt; [</span><br><span class="line">                    <span class="string">"*"</span> =&gt; new \stdClass()</span><br><span class="line">                ],</span><br><span class="line">                <span class="string">'require_field_match'</span> =&gt; <span class="literal">true</span></span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$response</span> = <span class="variable">$client</span>-&gt;search(<span class="variable">$params</span>);</span><br><span class="line">    dump(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"wildcard"</span>;</span><br><span class="line">    <span class="variable">$params</span> = [</span><br><span class="line">        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">        <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">        <span class="string">'body'</span> =&gt; [</span><br><span class="line">            <span class="string">'query'</span> =&gt; [</span><br><span class="line">                <span class="string">'wildcard'</span> =&gt; [</span><br><span class="line">                    <span class="string">'testField'</span> =&gt; <span class="string">'*elastic*'</span></span><br><span class="line">                ],</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">'highlight'</span> =&gt; [</span><br><span class="line">                <span class="string">'pre_tags'</span> =&gt; [<span class="string">"&lt;em&gt;"</span>],</span><br><span class="line">                <span class="string">'post_tags'</span> =&gt; [<span class="string">"&lt;/em&gt;"</span>],</span><br><span class="line">                <span class="string">'fields'</span> =&gt; [</span><br><span class="line">                    <span class="string">"*"</span> =&gt; new \stdClass()</span><br><span class="line">                ],</span><br><span class="line">                <span class="string">'require_field_match'</span> =&gt; <span class="literal">true</span></span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$response</span> = <span class="variable">$client</span>-&gt;search(<span class="variable">$params</span>);</span><br><span class="line">    dump(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"minimum_should_match"</span>;</span><br><span class="line">    <span class="variable">$params</span> = [</span><br><span class="line">        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">        <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">        <span class="string">'body'</span> =&gt; [</span><br><span class="line">            <span class="string">'query'</span> =&gt; [</span><br><span class="line">                <span class="string">'match'</span> =&gt; [</span><br><span class="line">                    <span class="string">'testField'</span> =&gt; [</span><br><span class="line">                        <span class="string">"query"</span>=&gt; <span class="string">"php"</span>,</span><br><span class="line">                        <span class="string">"operator"</span>=&gt;<span class="string">"or"</span>,</span><br><span class="line">                        <span class="string">"minimum_should_match"</span> =&gt; 1</span><br><span class="line">                    ]</span><br><span class="line">                ],</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">'highlight'</span> =&gt; [</span><br><span class="line">                <span class="string">'pre_tags'</span> =&gt; [<span class="string">"&lt;em&gt;"</span>],</span><br><span class="line">                <span class="string">'post_tags'</span> =&gt; [<span class="string">"&lt;/em&gt;"</span>],</span><br><span class="line">                <span class="string">'fields'</span> =&gt; [</span><br><span class="line">                    <span class="string">"*"</span> =&gt; new \stdClass()</span><br><span class="line">                ],</span><br><span class="line">                <span class="string">'require_field_match'</span> =&gt; <span class="literal">false</span></span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$response</span> = <span class="variable">$client</span>-&gt;search(<span class="variable">$params</span>);</span><br><span class="line">    dump(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="variable">$params</span> = [</span><br><span class="line">        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">        <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">        <span class="string">'body'</span> =&gt; [</span><br><span class="line">            <span class="string">'query'</span> =&gt; [</span><br><span class="line">                <span class="string">'fuzzy'</span> =&gt; [</span><br><span class="line">                    <span class="string">"testField"</span> =&gt; [</span><br><span class="line">                        <span class="string">"value"</span>=&gt;<span class="string">"pha"</span>,</span><br><span class="line">                        <span class="string">"fuzziness"</span>=&gt; 2</span><br><span class="line">                      ]</span><br><span class="line">                ],</span><br><span class="line">            ],</span><br><span class="line">            <span class="string">'highlight'</span> =&gt; [</span><br><span class="line">                <span class="string">'pre_tags'</span> =&gt; [<span class="string">"&lt;em&gt;"</span>],</span><br><span class="line">                <span class="string">'post_tags'</span> =&gt; [<span class="string">"&lt;/em&gt;"</span>],</span><br><span class="line">                <span class="string">'fields'</span> =&gt; [</span><br><span class="line">                    <span class="string">"*"</span> =&gt; new \stdClass()</span><br><span class="line">                ],</span><br><span class="line">                <span class="string">'require_field_match'</span> =&gt; <span class="literal">true</span></span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$response</span> = <span class="variable">$client</span>-&gt;search(<span class="variable">$params</span>);</span><br><span class="line">    dump(<span class="variable">$response</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//</span><br><span class="line">//    <span class="variable">$params</span> = [</span><br><span class="line">//        <span class="string">'body'</span> =&gt; [</span><br><span class="line">//            <span class="string">'text'</span> =&gt; <span class="string">'中国'</span>,</span><br><span class="line">//            <span class="string">'analyzer'</span>=&gt;<span class="string">'ik_max_word'</span> //ik_max_word 精细  ik_smart 粗略</span><br><span class="line">//        ]</span><br><span class="line">//    ];</span><br><span class="line">//    <span class="variable">$res</span> =  <span class="variable">$client</span>-&gt;indices()-&gt;analyze(<span class="variable">$params</span>);</span><br><span class="line">//    dump(<span class="variable">$res</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable">$search_params</span> = [</span><br><span class="line">        <span class="string">'index'</span> =&gt; <span class="string">'my_index'</span>,</span><br><span class="line">        <span class="string">'type'</span> =&gt; <span class="string">'my_type'</span>,</span><br><span class="line">        <span class="string">'body'</span> =&gt; [</span><br><span class="line">//            <span class="string">'from'</span> =&gt; 4,</span><br><span class="line">//            <span class="string">'size'</span> =&gt; 2,          //分页展示，from相当于分页中的偏移量，size相当于每页展示的条数</span><br><span class="line">            <span class="string">'query'</span> =&gt; [</span><br><span class="line">                <span class="string">'match'</span> =&gt; [</span><br><span class="line">                    <span class="string">'testField'</span> =&gt;[<span class="string">'query'</span>=&gt;<span class="string">'elastic php ik'</span>,<span class="string">'operator'</span> =&gt; <span class="string">'OR'</span>] //所有关键词都必须出现 可以不连续(默认是有一个词就匹配到)</span><br><span class="line">                ]</span><br><span class="line">//                <span class="string">"fields"</span> : [<span class="string">"title"</span>, <span class="string">"content"</span>]</span><br><span class="line">            ],</span><br><span class="line">            //设置高亮</span><br><span class="line">            <span class="string">"highlight"</span> =&gt; [</span><br><span class="line">                <span class="string">"pre_tags"</span> =&gt; [</span><br><span class="line">                    <span class="string">'&lt;span style="color:red"&gt;'</span></span><br><span class="line">                ],</span><br><span class="line">                <span class="string">"post_tags"</span> =&gt; [</span><br><span class="line">                    <span class="string">'&lt;/span&gt;'</span></span><br><span class="line"></span><br><span class="line">                ],</span><br><span class="line">                <span class="string">'fields'</span>=&gt; [</span><br><span class="line">                    <span class="string">'*'</span> =&gt; new \stdClass()</span><br><span class="line">                ]</span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    ];</span><br><span class="line">    <span class="variable">$res</span> = <span class="variable">$client</span>-&gt;search(<span class="variable">$search_params</span>);</span><br><span class="line">    dump(<span class="variable">$res</span>);</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>elasticsearch</category>
      </categories>
      <tags>
        <tag>elasticsearch</tag>
        <tag>php</tag>
        <tag>laravel</tag>
      </tags>
  </entry>
  <entry>
    <title>java</title>
    <url>/posts/7f1ae6d2.html</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>laravel base</title>
    <url>/posts/92c55451.html</url>
    <content><![CDATA[<h3 id="配置composer源"><a href="#配置composer源" class="headerlink" title="配置composer源"></a>配置composer源</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">composer global update</span><br><span class="line">composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/</span><br></pre></td></tr></table></figure>

<h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><p>composer create-project –prefer-dist laravel/laravel pims</p>
<h3 id="nginx隐藏入口文件"><a href="#nginx隐藏入口文件" class="headerlink" title="nginx隐藏入口文件"></a>nginx隐藏入口文件</h3><p>try_files $uri $uri/ /index.php?$query_string;</p>
]]></content>
      <categories>
        <category>laravel</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>laravel</tag>
      </tags>
  </entry>
  <entry>
    <title>mall-project</title>
    <url>/posts/fd520c28.html</url>
    <content><![CDATA[<p>主要服务于电商项目，基于laravel开发，环境centos7、tengine、php7、ES搜索、基于swoole的websocket。</p>
<a id="more"></a>
<h1 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#设置全局资源地址</span><br><span class="line">## php框架</span><br><span class="line">#composer config -g repo.packagist composer https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;composer&#x2F; #全局</span><br><span class="line">composer create-project --prefer-dist laravel&#x2F;laravel demo</span><br><span class="line">composer config repo.packagist composer https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;composer&#x2F; #项目</span><br><span class="line">cd demo</span><br><span class="line"></span><br><span class="line">composer require laravel&#x2F;scout</span><br><span class="line">composer require elasticsearch&#x2F;elasticsearch</span><br><span class="line"></span><br><span class="line">#config&#x2F;app.php</span><br><span class="line">Laravel\Scout\ScoutServiceProvider::class,</span><br><span class="line">LaravelScoutElasticsearch\ElasticsearchServiceProvider::class,</span><br><span class="line"></span><br><span class="line">php artisan vendor:publish --provider&#x3D;&quot;Laravel\Scout\ScoutServiceProvider&quot;</span><br><span class="line">php artisan vendor:publish --provider&#x3D;&quot;LaravelScoutElasticsearch\ElasticsearchServiceProvider&quot;</span><br><span class="line">php artisan make:cors CORS</span><br><span class="line"></span><br><span class="line">#微信小程序</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;wechat-miniprogram&#x2F;miniprogram-demo</span><br><span class="line">微信小程序加密数据解密算法https:&#x2F;&#x2F;developers.weixin.qq.com&#x2F;miniprogram&#x2F;dev&#x2F;framework&#x2F;open-ability&#x2F;signature.html</span><br><span class="line"></span><br><span class="line">#资源软连接</span><br><span class="line">php artisan storage:link</span><br></pre></td></tr></table></figure>
<h1 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h1><h2 id="登录、退出"><a href="#登录、退出" class="headerlink" title="登录、退出"></a>登录、退出</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">php artisan make:controller Api\LogController</span><br></pre></td></tr></table></figure>



























]]></content>
      <categories>
        <category>项目</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>laravel</tag>
      </tags>
  </entry>
  <entry>
    <title>excel for php</title>
    <url>/posts/1803d72c.html</url>
    <content><![CDATA[<p>excel for php</p>
<a id="more"></a>

<p><a href="https://phpspreadsheet.readthedocs.io/en/latest/" target="_blank" rel="noopener">phpspreadsheet doc</a></p>
<figure class="highlight excel"><table><tr><td class="code"><pre><span class="line">composer require phpoffice/phpspreadsheet</span><br><span class="line">-------------------------------------</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">require 'vendor/autoload.php';</span><br><span class="line"></span><br><span class="line">use PhpOffice\PhpSpreadsheet\Spreadsheet;</span><br><span class="line">use PhpOffice\PhpSpreadsheet\Writer\Xlsx;</span><br><span class="line"></span><br><span class="line">$spreadsheet = new Spreadsheet();</span><br><span class="line">$<span class="built_in">sheet</span> = $spreadsheet-&gt;getActiveSheet();</span><br><span class="line">$<span class="built_in">sheet</span>-&gt;setCellValue('<span class="symbol">A1</span>', 'Hello World !');</span><br><span class="line"></span><br><span class="line">$writer = new Xlsx($spreadsheet);</span><br><span class="line">$writer-&gt;save('hello world.xlsx');</span><br></pre></td></tr></table></figure>
<p>php.ini file, or by using ini_set(‘memory_limit’, ‘128M’)</p>
<p><a href="https://github.com/Maatwebsite/Laravel-Excel" target="_blank" rel="noopener">Laravel-Excel</a><br><a href="https://docs.laravel-excel.com/3.1/getting-started/" target="_blank" rel="noopener">Laravel-Excel doc</a></p>
<figure class="highlight plain"><figcaption><span>require maatwebsite/excel</span></figcaption><table><tr><td class="code"><pre><span class="line">composer require maatwebsite&#x2F;excel</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>laravel</category>
        <category>excel</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>laravel</tag>
        <tag>excel</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos - nginx - php - mysql - redis</title>
    <url>/posts/c210a9da.html</url>
    <content><![CDATA[<p><code>Centos - nginx - php - mysql - redis</code></p>
<a id="more"></a>

<h3 id="centos"><a href="#centos" class="headerlink" title="centos"></a>centos</h3><p><a href="https://www.centos.org/download/" target="_blank" rel="noopener">CentOS-7-x86_64-Minimal-1908.iso</a></p>
<h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">nginx-1.16.1.tar.gz</a><br><a href="http://tengine.taobao.org/download.html" target="_blank" rel="noopener">tengine-2.3.2.tar.gz</a><br><a href="https://openresty.org/en/download.html" target="_blank" rel="noopener">openresty-1.15.8.1.tar.gz</a></p>
<h3 id="php"><a href="#php" class="headerlink" title="php"></a>php</h3><p><a href="https://www.php.net/downloads.php" target="_blank" rel="noopener">php-7.3.9.tar.gz</a><br><a href="https://cmake.org/download/" target="_blank" rel="noopener">cmake-3.15.3.tar.gz</a><br><a href="https://libzip.org/download/" target="_blank" rel="noopener">libzip-1.5.2.tar.gz</a><br><a href="https://github.com/swoole/swoole-src/releases" target="_blank" rel="noopener">swoole-src-4.4.6.tar.gz</a></p>
<h3 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h3><h3 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h3><p><a href="https://redis.io/download" target="_blank" rel="noopener">redis-5.0.5.tar.gz</a><br><a href="https://github.com/phpredis/phpredis/releases" target="_blank" rel="noopener">phpredis-5.0.2.tar.gz</a></p>
<h3 id="脚本安装"><a href="#脚本安装" class="headerlink" title="脚本安装"></a>脚本安装</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sed -i <span class="string">'s/\r$//'</span> lnmp.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">yum clean all <span class="comment">#clear yum</span></span><br><span class="line">yum -y update <span class="comment">#update yum</span></span><br><span class="line"></span><br><span class="line">yum -y install lrzsz <span class="comment">#xshell</span></span><br><span class="line"></span><br><span class="line">yum -y install gcc gcc-c++ autoconf automake libtool make cmake vim wget zip unzip</span><br><span class="line">yum -y install zlib zlib-devel openssl openssl-devel pcre-devel </span><br><span class="line">yum -y install epel-release</span><br><span class="line"></span><br><span class="line">yum -y install libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel libmcrypt libmcrypt-devel readline readline-devel libxslt libxslt-devel libzip libX11</span><br><span class="line"></span><br><span class="line"><span class="comment">#centos 80</span></span><br><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------------tengine--------------------------------</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="comment">#tengine服务器的安装</span></span><br><span class="line">wget -c http://tengine.taobao.org/download/tengine-2.3.2.tar.gz</span><br><span class="line">tar zxvf tengine*</span><br><span class="line">groupadd nginx</span><br><span class="line">useradd -g nginx -M tengine</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> tengine*</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/tengine \</span><br><span class="line">--pid-path=/usr/<span class="built_in">local</span>/tengine/run/nginx.pid \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--user=tengine \</span><br><span class="line">--group=nginx \</span><br><span class="line">--with-pcre </span><br><span class="line"></span><br><span class="line">make&amp;&amp;make install</span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/tengine/sbin/nginx -c /usr/<span class="built_in">local</span>/tengine/conf/nginx.conf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'[Unit]</span></span><br><span class="line"><span class="string">Description=tengine - high performance web server</span></span><br><span class="line"><span class="string">After=network.target remote-fs.target nss-lookup.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">Type=forking</span></span><br><span class="line"><span class="string">PIDFile=/usr/local/tengine/run/nginx.pid</span></span><br><span class="line"><span class="string">ExecStartPre=/usr/local/tengine/sbin/nginx -t -c /usr/local/tengine/conf/nginx.conf</span></span><br><span class="line"><span class="string">ExecStart=/usr/local/tengine/sbin/nginx -c /usr/local/tengine/conf/nginx.conf</span></span><br><span class="line"><span class="string">ExecReload=/usr/local/tengine/sbin/nginx -s reload</span></span><br><span class="line"><span class="string">ExecStop=/usr/local/tengine/sbin/nginx -s stop</span></span><br><span class="line"><span class="string">ExecQuit=/usr/local/tengine/sbin/nginx -s quit</span></span><br><span class="line"><span class="string">PrivateTmp=true</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target '</span> &gt; /usr/lib/systemd/system/tengine.service</span><br><span class="line"></span><br><span class="line">chmod +x /usr/lib/systemd/system/tengine.service</span><br><span class="line">systemctl <span class="built_in">enable</span> tengine</span><br><span class="line">/usr/<span class="built_in">local</span>/tengine/sbin/nginx -s stop</span><br><span class="line">systemctl restart tengine</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#-------------------------nginx-----------------------------</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget -c http://nginx.org/download/nginx-1.16.1.tar.gz</span><br><span class="line">tar zxvf nginx*</span><br><span class="line">useradd -g nginx -M nginx</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> nginx*</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx \</span><br><span class="line">--pid-path=/usr/<span class="built_in">local</span>/nginx/run/nginx.pid \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--user=nginx \</span><br><span class="line">--group=nginx \</span><br><span class="line">--with-pcre </span><br><span class="line"></span><br><span class="line">make&amp;&amp;make install</span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -c /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'[Unit]</span></span><br><span class="line"><span class="string">Description=nginx - high performance web server</span></span><br><span class="line"><span class="string">After=network.target remote-fs.target nss-lookup.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">Type=forking</span></span><br><span class="line"><span class="string">PIDFile=/usr/local/nginx/run/nginx.pid</span></span><br><span class="line"><span class="string">ExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="string">ExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="string">ExecReload=/usr/local/nginx/sbin/nginx -s reload</span></span><br><span class="line"><span class="string">ExecStop=/usr/local/nginx/sbin/nginx -s stop</span></span><br><span class="line"><span class="string">ExecQuit=/usr/local/nginx/sbin/nginx -s quit</span></span><br><span class="line"><span class="string">PrivateTmp=true</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target '</span> &gt; /usr/lib/systemd/system/nginx.service</span><br><span class="line"></span><br><span class="line">chmod +x /usr/lib/systemd/system/nginx.service</span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -s stop</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br><span class="line">systemctl restart nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------openresty---------------------------</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget -c https://openresty.org/download/openresty-1.15.8.1.tar.gz</span><br><span class="line">tar zxvf openresty*</span><br><span class="line">useradd -g nginx -M openresty</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> openresty*</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/openresty \</span><br><span class="line">--pid-path=/usr/<span class="built_in">local</span>/openresty/run/nginx.pid \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--user=openresty \</span><br><span class="line">--group=nginx \</span><br><span class="line">--with-pcre </span><br><span class="line"></span><br><span class="line">make&amp;&amp;make install</span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/openresty/nginx/sbin/nginx -c /usr/usr/<span class="built_in">local</span>/openresty/nginx/conf/nginx.conf</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'[Unit]</span></span><br><span class="line"><span class="string">Description=openresty - high performance web server</span></span><br><span class="line"><span class="string">After=network.target remote-fs.target nss-lookup.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">Type=forking</span></span><br><span class="line"><span class="string">PIDFile=/usr/local/openresty/run/nginx.pid</span></span><br><span class="line"><span class="string">ExecStartPre=/usr/local/openresty/nginx/sbin/nginx -t -c /usr/local/openresty/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="string">ExecStart=/usr/local/openresty/nginx/sbin/nginx -c /usr/local/openresty/nginx/conf/nginx.conf</span></span><br><span class="line"><span class="string">ExecReload=/usr/local/openresty/nginx/sbin/nginx -s reload</span></span><br><span class="line"><span class="string">ExecStop=/usr/local/openresty/nginx/sbin/nginx -s stop</span></span><br><span class="line"><span class="string">ExecQuit=/usr/local/openresty/nginx/sbin/nginx -s quit</span></span><br><span class="line"><span class="string">PrivateTmp=true</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target '</span> &gt; /usr/lib/systemd/system/openresty.service</span><br><span class="line"></span><br><span class="line">chmod +x /usr/lib/systemd/system/openresty.service</span><br><span class="line"></span><br><span class="line">systemctl <span class="built_in">enable</span> openresty</span><br><span class="line">/usr/<span class="built_in">local</span>/openresty/nginx/sbin/nginx -s stop</span><br><span class="line">systemctl restart openresty</span><br><span class="line"><span class="comment">#---------------------------php7---------------------------</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget -c https://github.com/Kitware/CMake/releases/download/v3.15.3/cmake-3.15.3.tar.gz</span><br><span class="line">tar -zxvf cmake*</span><br><span class="line"><span class="built_in">cd</span> cmake*</span><br><span class="line">./bootstrap</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">cmake --version</span><br><span class="line"><span class="built_in">hash</span> -r</span><br><span class="line"></span><br><span class="line">yum remove libzip -y</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget  https://libzip.org/download/libzip-1.5.2.tar.gz</span><br><span class="line">tar -zxvf libzip*</span><br><span class="line"><span class="built_in">cd</span> libzip*</span><br><span class="line">mkdir build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/usr/local/lib64"</span> &gt;&gt; /etc/ld.so.conf </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/usr/local/lib"</span> &gt;&gt; /etc/ld.so.conf </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/usr/lib"</span> &gt;&gt; /etc/ld.so.conf </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/usr/lib64"</span> &gt;&gt; /etc/ld.so.conf</span><br><span class="line"></span><br><span class="line">ldconfig -v <span class="comment"># 使之生效</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget -c https://github.com/php/php-src/archive/php-7.3.9.tar.gz</span><br><span class="line">tar -xzvf php*</span><br><span class="line"><span class="built_in">cd</span> php*</span><br><span class="line"></span><br><span class="line">./configure --<span class="built_in">help</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/php73 \</span><br><span class="line">--with-config-file-path=/usr/<span class="built_in">local</span>/php73/etc \</span><br><span class="line">--with-config-file-scan-dir=/usr/<span class="built_in">local</span>/php73/etc/php.d \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--<span class="built_in">enable</span>-mysqlnd \</span><br><span class="line">--<span class="built_in">enable</span>-fpm \</span><br><span class="line">--with-fpm-user=nginx \</span><br><span class="line">--with-fpm-group=nginx \</span><br><span class="line">--<span class="built_in">enable</span>-xml \</span><br><span class="line">--<span class="built_in">enable</span>-pcntl \</span><br><span class="line">--<span class="built_in">enable</span>-zip \</span><br><span class="line">--<span class="built_in">enable</span>-inline-optimization \</span><br><span class="line">--<span class="built_in">disable</span>-debug \</span><br><span class="line">--<span class="built_in">disable</span>-rpath \</span><br><span class="line">--<span class="built_in">enable</span>-shared \</span><br><span class="line">--<span class="built_in">enable</span>-soap \</span><br><span class="line">--with-xmlrpc \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-pcre-regex \</span><br><span class="line">--with-sqlite3 \</span><br><span class="line">--with-zlib \</span><br><span class="line">--<span class="built_in">enable</span>-bcmath \</span><br><span class="line">--with-iconv \</span><br><span class="line">--with-bz2 \</span><br><span class="line">--<span class="built_in">enable</span>-calendar \</span><br><span class="line">--with-curl \</span><br><span class="line">--with-cdb \</span><br><span class="line">--<span class="built_in">enable</span>-dom \</span><br><span class="line">--<span class="built_in">enable</span>-exif \</span><br><span class="line">--<span class="built_in">enable</span>-fileinfo \</span><br><span class="line">--<span class="built_in">enable</span>-filter \</span><br><span class="line">--with-pcre-dir \</span><br><span class="line">--<span class="built_in">enable</span>-ftp \</span><br><span class="line">--with-gd \</span><br><span class="line">--with-openssl-dir \</span><br><span class="line">--with-jpeg-dir \</span><br><span class="line">--with-png-dir \</span><br><span class="line">--with-freetype-dir \</span><br><span class="line">--<span class="built_in">enable</span>-gd-native-ttf \</span><br><span class="line">--<span class="built_in">enable</span>-gd-jis-conv \</span><br><span class="line">--with-gettext \</span><br><span class="line">--with-gmp \</span><br><span class="line">--with-mhash \</span><br><span class="line">--<span class="built_in">enable</span>-json \</span><br><span class="line">--<span class="built_in">enable</span>-mbstring \</span><br><span class="line">--<span class="built_in">enable</span>-mbregex \</span><br><span class="line">--<span class="built_in">enable</span>-mbregex-backtrack \</span><br><span class="line">--with-libmbfl \</span><br><span class="line">--with-onig \</span><br><span class="line">--<span class="built_in">enable</span>-pdo \</span><br><span class="line">--with-mysqli=mysqlnd \</span><br><span class="line">--with-pdo-mysql=mysqlnd \</span><br><span class="line">--with-zlib-dir \</span><br><span class="line">--with-pdo-sqlite \</span><br><span class="line">--with-readline \</span><br><span class="line">--<span class="built_in">enable</span>-session \</span><br><span class="line">--<span class="built_in">enable</span>-shmop \</span><br><span class="line">--<span class="built_in">enable</span>-simplexml \</span><br><span class="line">--<span class="built_in">enable</span>-sockets \</span><br><span class="line">--<span class="built_in">enable</span>-sysvmsg \</span><br><span class="line">--<span class="built_in">enable</span>-sysvsem \</span><br><span class="line">--<span class="built_in">enable</span>-sysvshm \</span><br><span class="line">--<span class="built_in">enable</span>-wddx \</span><br><span class="line">--with-libxml-dir \</span><br><span class="line">--with-xsl \</span><br><span class="line">--<span class="built_in">enable</span>-mysqlnd-compression-support \</span><br><span class="line">--with-pear \</span><br><span class="line">--<span class="built_in">enable</span>-opcache</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/php73/bin/php -v</span><br><span class="line">/usr/<span class="built_in">local</span>/php73/bin/php -i | grep php.ini</span><br><span class="line">cp php.ini-production /usr/<span class="built_in">local</span>/php73/etc/php.ini</span><br><span class="line">/usr/<span class="built_in">local</span>/php73/bin/php -i | grep php.ini</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/php73/etc</span><br><span class="line">cp php-fpm.conf.default php-fpm.conf</span><br><span class="line">cp php-fpm.d/www.conf.default php-fpm.d/www.conf</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~/php*</span><br><span class="line">cp sapi/fpm/php-fpm.service /usr/lib/systemd/system/php-fpm.service</span><br><span class="line">systemctl start php-fpm.service</span><br><span class="line">systemctl <span class="built_in">enable</span> php-fpm.service</span><br><span class="line"></span><br><span class="line">cp sapi/fpm/php-fpm.service /usr/lib/systemd/system/php-fpm-73.service</span><br><span class="line">systemctl <span class="built_in">enable</span> php-fpm-73.service</span><br><span class="line">systemctl start php-fpm-73.service</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加全局</span></span><br><span class="line"><span class="comment">#export PATH=$PATH:/usr/local/php73/bin</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">'export PATH=/usr/local/php73/bin/:/usr/local/php73/sbin/:$PATH'</span> &gt;&gt; /etc/profile &amp;&amp; <span class="built_in">source</span> /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#pecl install swoole</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget https://github.com/swoole/swoole-src/archive/v4.4.6.tar.gz</span><br><span class="line">tar -zxvf swoole*</span><br><span class="line"><span class="built_in">cd</span> swoole*</span><br><span class="line"></span><br><span class="line">make clean</span><br><span class="line">phpize</span><br><span class="line"><span class="built_in">which</span> php-config  <span class="comment">#/usr/local/php73/bin/php-config</span></span><br><span class="line">./configure --with-php-config=/usr/<span class="built_in">local</span>/php73/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"><span class="comment">#php --ri swoole</span></span><br><span class="line"></span><br><span class="line">yum -y remove mysql80-community-release-el7-1.noarch</span><br><span class="line">wget http://repo.mysql.com/mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">yum  -y localinstall mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line">yum repolist all | grep mysql</span><br><span class="line">yum -y install mysql-community-server</span><br><span class="line"></span><br><span class="line">systemctl start mysqld.service</span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#-----------------------redis------------------------------</span></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">wget -c http://download.redis.io/releases/redis-5.0.5.tar.gz</span><br><span class="line">tar zxvf redis*</span><br><span class="line"><span class="built_in">cd</span> redis*</span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/redis</span><br><span class="line"></span><br><span class="line">mv redis-5.0.5 /usr/<span class="built_in">local</span>/redis</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/redis</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="comment">#wget -c https://github.com/phpredis/phpredis/archive/5.0.2.tar.gz</span></span><br><span class="line">tar -zxvf phpredis*</span><br><span class="line"><span class="built_in">cd</span> phpredis*  <span class="comment"># 进入 phpredis 目录</span></span><br><span class="line">make clean</span><br><span class="line">phpize</span><br><span class="line"><span class="built_in">which</span> php-config  <span class="comment">#/usr/local/php73/bin/php-config</span></span><br><span class="line">./configure --with-php-config=/usr/<span class="built_in">local</span>/php73/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">wget https://dl.laravel-china.org/composer.phar -O /usr/<span class="built_in">local</span>/bin/composer</span><br><span class="line">chmod a+x /usr/<span class="built_in">local</span>/bin/composer</span><br><span class="line"></span><br><span class="line">curl -sS https://getcomposer.org/installer | php</span><br><span class="line">cp composer.phar /usr/<span class="built_in">local</span>/bin/composer</span><br><span class="line"></span><br><span class="line">composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#centos 9501</span></span><br><span class="line">firewall-cmd --zone=public --add-port=9501/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h3 id="nginx配置https"><a href="#nginx配置https" class="headerlink" title="nginx配置https"></a>nginx配置https</h3><p>私有证书</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">openssl req -x509 -nodes -days 36500 -newkey rsa:2048 -keyout &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;ssl&#x2F;xxx.xxx.com.key -out &#x2F;usr&#x2F;local&#x2F;etc&#x2F;nginx&#x2F;ssl&#x2F;nginx.crt</span><br></pre></td></tr></table></figure>

<p>阿里ssl证书</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"> listen       80;</span><br><span class="line"> server_name  xxx.xxx.com;</span><br><span class="line"> rewrite ^(.*) https:&#x2F;&#x2F;$server_name$1 permanent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">	listen 443 ssl;</span><br><span class="line">	server_name xxx.xxx.com;</span><br><span class="line">	ssl_certificate &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;ssl&#x2F;xxx.xxx.com.pem;</span><br><span class="line">	ssl_certificate_key &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;ssl&#x2F;xxx.xxx.com.key;</span><br><span class="line">	ssl_session_cache    shared:SSL:1m;</span><br><span class="line">	ssl_session_timeout  5m;</span><br><span class="line">	#禁止在header中出现服务器版本，防止黑客利用版本漏洞攻击</span><br><span class="line">	server_tokens off;</span><br><span class="line">	#如果是全站 HTTPS 并且不考虑 HTTP 的话，可以加入 HSTS 告诉你的浏览器本网站全站加密，并且强制用 HTTPS 访问</span><br><span class="line">	fastcgi_param   HTTPS               on;</span><br><span class="line">	fastcgi_param   HTTP_SCHEME         https;</span><br><span class="line">	#access_log &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;logs&#x2F;httpsaccess.log;</span><br><span class="line"></span><br><span class="line">	 location &#x2F; &#123;</span><br><span class="line">	     root   &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx&#x2F;html;</span><br><span class="line">	     try_files $uri $uri&#x2F; &#x2F;index.php?$query_string;</span><br><span class="line">	     index  index.php index.html index.htm;</span><br><span class="line">	 &#125;</span><br><span class="line">	 error_page   500 502 503 504  &#x2F;50x.html;</span><br><span class="line">	 location &#x3D; &#x2F;50x.html &#123;</span><br><span class="line">	     root   &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">	 &#125;</span><br><span class="line">	 location ~ \.php$ &#123;</span><br><span class="line">	    root           html;</span><br><span class="line">	    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">	    fastcgi_index  index.php;</span><br><span class="line">	    fastcgi_param  SCRIPT_FILENAME  &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;html&#x2F;public&#x2F;$fastcgi_script_name;</span><br><span class="line">	    include        fastcgi_params;</span><br><span class="line">	&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">	#配置检测</span><br><span class="line">	&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -t</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>linux</category>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>lnmp</tag>
      </tags>
  </entry>
  <entry>
    <title>线性代数</title>
    <url>/posts/c23efd5b.html</url>
    <content><![CDATA[<p>判断是否相似于对角矩阵：</p>
<ol>
<li>是否是实对称矩阵，实对称矩阵必相似于对角矩阵</li>
<li>特征值是否都是单实根</li>
<li>特征值是r重根，若对应有r个线性无关特征向量</li>
</ol>
<h3 id="二次型矩阵"><a href="#二次型矩阵" class="headerlink" title="二次型矩阵"></a>二次型矩阵</h3><p>二次型矩阵时对称矩阵，</p>
<h3 id="二次型"><a href="#二次型" class="headerlink" title="二次型"></a>二次型</h3><p>正定矩阵<code>顺序主子式全大于0</code><br>等价矩阵<code>r(A)=r(B)</code><br>相似矩阵<code>特征值对应相等</code><br>合同矩阵<code>有相同的正、负惯性指数</code></p>
]]></content>
      <categories>
        <category>mathematics</category>
      </categories>
      <tags>
        <tag>linerar algebra</tag>
      </tags>
  </entry>
  <entry>
    <title>miniprogram</title>
    <url>/posts/89b10c35.html</url>
    <content><![CDATA[<p><a href="https://developers.weixin.qq.com/miniprogram/dev/demo.html" target="_blank" rel="noopener">示例demo</a><br><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener">开发工具</a><br><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/signature.html" target="_blank" rel="noopener">加密数据解密算法</a> 以及demo下载</p>
]]></content>
      <categories>
        <category>weixin</category>
      </categories>
      <tags>
        <tag>微信</tag>
        <tag>小程序</tag>
      </tags>
  </entry>
  <entry>
    <title>工具网址 website</title>
    <url>/posts/476f5de7.html</url>
    <content><![CDATA[<h1 id="工具站点"><a href="#工具站点" class="headerlink" title="工具站点"></a>工具站点</h1><a id="more"></a>

<p><a href="https://developer.android.google.cn/" target="_blank" rel="noopener">android</a><br><a href="https://git-scm.com/" target="_blank" rel="noopener">git</a><br><a href="https://www.php.net/downloads.php" target="_blank" rel="noopener">php</a><br><a href="https://www.getpostman.com/downloads/" target="_blank" rel="noopener">postman</a><br><a href="https://www.xp.cn/" target="_blank" rel="noopener">phpstudy</a><br><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">mysql</a><br><a href="https://www.freedownloadmanager.org/zh/" target="_blank" rel="noopener">free download manager</a><br><a href="http://www.sublimetext.com/" target="_blank" rel="noopener">sublime text</a><br><a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener">elasticsearch</a><br><a href="https://getcomposer.org/download/" target="_blank" rel="noopener">composer</a><br><a href="https://npm.taobao.org/" target="_blank" rel="noopener">npm.taobao</a><br><a href="https://www.yiibai.com/" target="_blank" rel="noopener">易百教程</a><br><a href="https://cn.vuejs.org/" target="_blank" rel="noopener">vue2</a><br><a href="https://msdn.itellyou.cn/" target="_blank" rel="noopener">https://msdn.itellyou.cn/</a><br><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener">微信公众平台</a><br><a href="https://xueyuanjun.com/" target="_blank" rel="noopener">学院君</a><br><a href="https://developers.redhat.com/products/openjdk/download" target="_blank" rel="noopener">openjdk</a><br><a href="https://www.mongodb.com/download-center/community" target="_blank" rel="noopener">mongodb</a><br><a href="https://www.iconfont.cn" target="_blank" rel="noopener">iconfont</a><br><a href="https://packagist.org/" target="_blank" rel="noopener">packagist</a><br><a href="http://openresty.org/cn/" target="_blank" rel="noopener">openresty</a><br><a href="https://www.teamviewer.cn/cn/download/windows/" target="_blank" rel="noopener">teamviewer</a><br><a href="http://jdk.java.net/" target="_blank" rel="noopener">http://jdk.java.net/</a></p>
]]></content>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>redis base</title>
    <url>/posts/e0ca2f59.html</url>
    <content><![CDATA[<a id="more"></a>
<h1 id="秒杀"><a href="#秒杀" class="headerlink" title="秒杀"></a>秒杀</h1><p>##消息队列</p>
<h3 id="冗余"><a href="#冗余" class="headerlink" title="冗余"></a>冗余</h3><p>首先数据需要冗余的时候，比如经常做订单系统，后续需要严格的转换和记录，消息队列可以把这些数据持久化存储在队列中，然后由订单处理程序进行获取，后续处理完成之后再把这条记录删除，保证每条记录都能处理完成。</p>
<h3 id="解耦"><a href="#解耦" class="headerlink" title="解耦"></a>解耦</h3><p>消息队列分离了两套系统，解决了两套系统深度耦合的问题。使用消息队列后，入队的系统和出队的系统没有直接的关系，入队系统和出队系统其中一套系统崩溃的时候，都不会影响到另一个系统的正常运转。</p>
<h3 id="流量削峰"><a href="#流量削峰" class="headerlink" title="流量削峰"></a>流量削峰</h3><p>这种场景最经典的就是秒杀抢购，这种情况会出现很大的流量剧增，大量的需求集中在短短的几秒内，对服务器的瞬间压力非常大，而我们配合缓存使用消息队列能非常有效的顶住瞬间访问量，防止服务器顶不住而崩溃。</p>
<h3 id="异步通讯"><a href="#异步通讯" class="headerlink" title="异步通讯"></a>异步通讯</h3><p>消息本身可以使入队的系统直接返回，所以实现了程序的异步操作，因此只要适合于异步的场景都可以使用消息队列来实现。</p>
<h3 id="扩展性"><a href="#扩展性" class="headerlink" title="扩展性"></a>扩展性</h3><p>比如订单入队之后或许会有财务系统进行处理，但是后期我想加配货系统，我只需要让配货系统订阅消息队列就可以了，这样就很容易扩展。</p>
<p>redis数据类型中的 list 类型</p>
<p>　　redis 的list 是一个双向链表，可以从头部或者尾部追加数据。</p>
<p>　　* LPUSH/LPUSHX :将值插入到（/存在的）列表头部</p>
<p>　　* RPUSH/RPUSHX: 将值插入到（/存在的）列表尾部</p>
<p>　　* LPOP : 移除并获取列表的第一个元素</p>
<p>　　* RPOP: 移除并获取列表的最后一个元素</p>
<p>　　* LTRIM: 保留指定区间内的元素</p>
<p>　　* LLEN: 获取列表长度</p>
<p>　　* LSET: 通过索引设置列表元素的值</p>
<p>　　* LINDEX: 通过索引获取列表中的元素</p>
<p>　　* LRANGE: 获取列表指定范围内的元素</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">CREATE TABLE &#96;redis_queue&#96; (</span><br><span class="line">  &#96;id&#96; int(10) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">  &#96;uid&#96; int(11) NOT NULL DEFAULT &#39;0&#39;,</span><br><span class="line">  &#96;time_stamp&#96; varchar(24) NOT NULL,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;)</span><br><span class="line">) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;88 DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">$redis &#x3D; new Redis();</span><br><span class="line">$redis-&gt;connect(&#39;127.0.0.1&#39;,6379);</span><br><span class="line">$redis-_name &#x3D; &#39;miaosha&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;秒杀用户涌入模拟,100个用户</span><br><span class="line">for ($i &#x3D;0; $i &lt; 100; $i++) &#123;</span><br><span class="line">    $uid &#x3D; rand(1000000,99999999);</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;检查redis链表长度（已存在数量)</span><br><span class="line">$num &#x3D; 10;</span><br><span class="line">if ($redis-&gt;lLen($redis_name) &lt; 10 ) &#123;</span><br><span class="line">    &#x2F;&#x2F;加入链表尾部</span><br><span class="line">    $redis-&gt;rPush($redis_name, $uid.&#39;%&#39;.microtime());</span><br><span class="line">&#125; else &#123;  &#x2F;&#x2F;如果达到10个</span><br><span class="line">    &#x2F;&#x2F;秒杀结束</span><br><span class="line">&#125;</span><br><span class="line">$redis-&gt;close();</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F;从队列头部读一个值，判断这个值是否存在，如果存在则切割出时间、uid保存到数据库中。（对于redis而言，如果从redis取出这个值，那么这个值就不在redis队列里了，如果出现问题失败了，那么我们需要有一个机制把失败的数据重新放入redis链表中）</span><br><span class="line">$redis &#x3D; new Redis();</span><br><span class="line">$redis-&gt;connect(&#39;127.0.0.1&#39;,6379);</span><br><span class="line">$redis-_name &#x3D; &#39;miaosha&#39;;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;死循环检测redis队列</span><br><span class="line">while(1) &#123;</span><br><span class="line">    $user &#x3D; $redis-&gt;lpop($redis_name);</span><br><span class="line">    if (!$user || $user &#x3D;&#x3D; &#39;null&#39;) &#123;  &#x2F;&#x2F;如果没有数据跳出循环</span><br><span class="line">        &#x2F;&#x2F;如果一直执行，速度是非常快的，那么服务器压力大，这里2秒一次</span><br><span class="line">        sleep(2);</span><br><span class="line">        &#x2F;&#x2F;跳出循环</span><br><span class="line">        continue;</span><br><span class="line">    &#125; </span><br><span class="line">    &#x2F;&#x2F;拿出微秒时间戳和uid</span><br><span class="line">    $user_arr &#x3D; explode(&#39;%&#39;, $user);</span><br><span class="line">    $insert_data &#x3D; array(</span><br><span class="line">        &#39;uid&#39; &#x3D;&gt; $user_arr[0];</span><br><span class="line">        &#39;time_stamp&#39; &#x3D;&gt; $user_arr[1];</span><br><span class="line">    );</span><br><span class="line">    $res &#x3D; $db-&gt;insert(&#39;redis_queue&#39;, $insert_data);</span><br><span class="line">    &#x2F;&#x2F;如果插入失败</span><br><span class="line">    if (!$res) &#123;</span><br><span class="line">        &#x2F;&#x2F;从哪个方向取出，从哪个方向插回</span><br><span class="line">        $redis-&gt;lpush($redis_name, $user);</span><br><span class="line">        sleep(2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line">$redis-&gt;close();</span><br></pre></td></tr></table></figure>
<h1 id="消息系统：专业性强、可靠，但学习成本高，如RabbitMQ"><a href="#消息系统：专业性强、可靠，但学习成本高，如RabbitMQ" class="headerlink" title="消息系统：专业性强、可靠，但学习成本高，如RabbitMQ"></a>消息系统：专业性强、可靠，但学习成本高，如RabbitMQ</h1><h2 id="缓存技术"><a href="#缓存技术" class="headerlink" title="缓存技术"></a>缓存技术</h2><p>数据缓存<br>页面缓存<br>事件触发缓存<br>内容触发缓存<br>静态缓存</p>
]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>php</tag>
        <tag>redis</tag>
      </tags>
  </entry>
</search>
